<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React-Router v4 Redirect with Redux</title>
    <meta name="description" content="React-Router v4 Redirect with Redux">
    <link rel="stylesheet" href="/thoughts/pagefind/pagefind-ui.css"><link rel="stylesheet" href="/thoughts/styles.css">
    <link rel="alternate" href="/thoughts/feed.xml" type="application/atom+xml" title="That. Just. Happened.">
    <link rel="alternate" href="/thoughts/feed.json" type="application/json" title="That. Just. Happened.">
  <script type="text/javascript" src="/thoughts/pagefind/pagefind-ui.js"></script><script type="text/javascript">window.addEventListener('DOMContentLoaded', () => { new PagefindUI({"element":"#search","showImages":false,"showEmptyFilters":true,"resetStyles":false,"bundlePath":"/thoughts/pagefind/","baseUrl":"/thoughts/"}); });</script></head>
  <body>
    <nav class="navbar">
      <a href="/thoughts/" class="navbar-home">
        <strong>That. Just. Happened.</strong>
      </a>

      <ul class="navbar-links">
        <li>
          <a href="/thoughts/">
            Home
          </a>
        </li>
        <li>
          <a href="/thoughts/posts/">
            Archive
          </a>
        </li>
        <li>
          <a href="/thoughts/about/">
            About Me
          </a>
        </li>
      </ul>

      <div class="navbar-search">
        <div id="search"></div>
      </div>
    </nav>

    <main class="body-post">
      <article class="post" data-pagefind-body="">
  <div class="post-header">
    <h1 class="post-title">React-Router v4 Redirect with Redux</h1>

    <nav class="post-tags">
    
      <a href="/thoughts/tags/React/" class="tag">React</a>
    
      <a href="/thoughts/tags/React-Router/" class="tag">React-Router</a>
    
      <a href="/thoughts/tags/Redux/" class="tag">Redux</a>
    
      <a href="/thoughts/tags/Redirect/" class="tag">Redirect</a>
    
    </nav>

    <time class="post-date" datetime="2018-08-28 00:00:00">
      August 28th, 2018
    </time>
  </div>

  <div class="post-body">
    <h1>Redirect</h1>
<p>Today I was trying to redirect a user based upon a button click within a react child component.  It took me <em>way too long</em> to get this to work.  So, I'm jotting this down here so I can find it again if I ever manage to strike the memories of today from my brain in favor of happier times.</p>
<p>First, the relevant dependencies from my package.json:</p>
<ul>
<li>react ^16.0.0</li>
<li>react-router-dom ^4.2.2</li>
<li>react-router-redux ^4.0.8</li>
<li>react-redux v5.0.7</li>
</ul>
<p>Second, my root component:</p>
<pre><code>render(
            &lt;Provider store={store}&gt;
                &lt;BrowserRouter basename={baseUrl}&gt;
                    &lt;App /&gt;
                &lt;/BrowserRouter&gt;
            &lt;/Provider&gt;,
            rootElement);
</code></pre>
<p>My App component loads a layout component which contains a Navigation component.  If you are like me, dear reader, at this point you are asking yourself "Why wouldn't you use a standard navigation solution?".  Well, good question.  Unfortunately the powers that be decided to out source the design before I was a part of the project and sold this layout and functionality to the customer. ...sigh... Anyway, my navigation component looked like:</p>
<pre><code>class NavMenu extends Component {
    displayName = NavMenu.name

    render() {
            return (
                &lt;div&gt;
                    &lt;ButtonToolbar bsClass={'btn-toolbar navigation'}&gt;
                        &lt;ToggleButtonGroup type={"radio"} name={"navOptions"} value={this.props.location.pathname}
                                           onChange={(e) =&gt; { this.props.history.push(e); }}&gt;
                            &lt;ToggleButton value={"/downloads"}&gt;DOWNLOADS&lt;/ToggleButton&gt;
                        &lt;/ToggleButtonGroup&gt;
                    &lt;/ButtonToolbar&gt;
                &lt;/div&gt;
            );
    }
}

export default withRouter(connect(mapStateToProps)(NavMenu));
</code></pre>
<p>So, as you can see, on the change event of the toggle button group I was hoping to execute a <code>this.props.history.push</code> command in order to force the react-router to load the relevant route.  However, what I found was this was not the case.  The URL would update but the page would not refresh.  Some careful <code>console.log</code> commands revealed that I was properly pushing the path onto the history stack.  So, I asked one of my dear friends...Google.  I found <a href="https://stackoverflow.com/a/42124328/70130">this post</a> which seemed to offer a few valid solutions.  I was particularly interested in the <code>withRouter</code> HOC solution.  But, as you can see in the code sample above I was already leveraging the <code>withRouter</code> command.  Hmm.  Strange.</p>
<p>After some head scratching and a bit more time scouring Google search results I found a random comment on a forum that suggested the root component may need the <code>withRouter</code> designation as well in order for the routing to be properly picked up along the chain.  So, I went back to my App component and wrapped it with a <code>withRouter</code> demarcation.  Sure enough, things started working as expected.  Sweet.  Now, let's hope I remember I put this here if I ever run into this issue again...</p>

  </div>
</article>

<hr>

<nav class="post-navigation">
  <ul>
    <li>
      ← Previous: <a href="/thoughts/posts/2018-08-02-dotnet-api-controller-attribute-gotcha/" rel="prev">[FromQuery] collection type fail</a>
    </li>
    
    <li>
      <strong>Next: <a href="/thoughts/posts/2018-09-19-configmapvolumemounts/" rel="next">ConfigMap VolumeMount File Overwrite</a> →</strong>
    </li>
    
  </ul>
</nav>
    </main>

    <footer></footer>

    <!-- Current page: /posts/2018-08-28-reactrouterv4redirect/ -->
  

</body></html>